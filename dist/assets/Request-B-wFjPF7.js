import{a3 as f,a4 as y,r as o,a5 as R,j as e,P as k}from"./index-BNH9iTYT.js";import{T as W,a as C,b as A,c as u,d as a,e as w,f as D}from"./TableRow-Ddg_ZvjR.js";import{S as E}from"./Select-z8M_qAC4.js";import{M as l}from"./MenuItem-B6IFg_kW.js";import"./IconButton-Bk_7tTm-.js";import"./useId-cXK4N2WA.js";import"./ButtonBase-Djntgs0r.js";import"./List-BkBvgyHE.js";import"./Toolbar-__opi1CO.js";import"./Menu-DnseiFJ2.js";import"./isHostComponent-DVu5iVWx.js";import"./Modal-Dru-Vug-.js";import"./listItemTextClasses-C6NV3aj7.js";const U=[{id:"amenity",label:"Amenity name",minWidth:170},{id:"resident",label:"Resident",minWidth:200},{id:"status",label:"Status",minWidth:100},{id:"bookingDate",label:"Booking Date",minWidth:170},{id:"startTime",label:"Start Time",minWidth:170},{id:"endTime",label:"End Time",minWidth:170}],X=()=>{const{bid:q}=f(),{data:r,isLoading:g,error:p,refetch:x}=y(),[d,c]=o.useState(0),[s,j]=o.useState(10),[B,H]=o.useState(),[b]=R(),P=(t,i)=>{c(i)},T=t=>{j(+t.target.value),c(0)},v=async(t,i)=>{try{await b({bid:t,status:i}).unwrap(),x(),console.log("Status updated successfully")}catch(n){console.error("Error updating status",n)}};if(g)return e.jsx("div",{children:"Loading..."});if(p)return e.jsx("div",{children:"Error loading Request."});const m=(r==null?void 0:r.bookings)||[];return e.jsx(e.Fragment,{children:e.jsxs(k,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(W,{sx:{maxHeight:440},children:e.jsxs(C,{stickyHeader:!0,"aria-label":"Request Table",children:[e.jsx(A,{children:e.jsx(u,{children:U.map(t=>e.jsx(a,{align:t.align,style:{minWidth:t.minWidth},children:t.label},t.id))})}),e.jsx(w,{children:m.slice(d*s,d*s+s).map((t,i)=>{var n,h;return e.jsxs(u,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(a,{children:((n=t.amenity)==null?void 0:n.name)||"N/A"}),e.jsx(a,{children:((h=t.resident)==null?void 0:h.name)||"N/A"}),e.jsx(a,{children:e.jsxs(E,{value:t.status,onChange:S=>v(t._id,S.target.value),size:"small",children:[e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"approved",children:"Approved"}),e.jsx(l,{value:"rejected",children:"Rejected"})]})}),e.jsx(a,{children:new Date(t.bookingDate).toLocaleDateString()}),e.jsx(a,{children:t.startTime}),e.jsx(a,{children:t.endTime})]},t._id)})})]})}),e.jsx(D,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:s,page:d,onPageChange:P,onRowsPerPageChange:T})]})})};export{X as default};
