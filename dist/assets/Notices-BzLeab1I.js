import{r as h,aO as x,au as g,j as e,P as f,e as j,Z as i,f as b,a6 as v,ay as u}from"./index-TOg4iC9X.js";import{M as c}from"./MenuItem-DFBgWJ5J.js";import"./listItemTextClasses-BwEbF0GS.js";import"./dividerClasses-9ENEhr9G.js";const C=()=>{var d;const[a,l]=h.useState({title:"",description:"",dateIssued:"",resident:""}),[m,{isLoading:o}]=x(),{data:n}=g(),s=t=>{l({...a,[t.target.name]:t.target.value})},p=async t=>{t.preventDefault();try{const r={...a};r.resident||delete r.resident,await m(r).unwrap(),u.success("Notice posted successfully"),l({title:"",description:"",dateIssued:"",resident:""})}catch{u.error("Failed to post notice")}};return e.jsxs(f,{elevation:3,sx:{padding:4,margin:4,maxWidth:600},children:[e.jsx(j,{variant:"h5",gutterBottom:!0,children:"Post New Notice"}),e.jsxs("form",{onSubmit:p,children:[e.jsx(i,{name:"title",label:"Title",value:a.title,onChange:s,fullWidth:!0,margin:"normal",required:!0}),e.jsx(i,{name:"description",label:"Description",value:a.description,onChange:s,fullWidth:!0,margin:"normal",multiline:!0,rows:4,required:!0}),e.jsx(i,{name:"dateIssued",label:"Date Issued",type:"date",value:a.dateIssued,onChange:s,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},required:!0}),e.jsxs(i,{select:!0,name:"resident",label:"Send To",value:a.resident,onChange:s,fullWidth:!0,margin:"normal",helperText:"Leave blank to send notice to all residents",children:[e.jsx(c,{value:"",children:"ðŸ“¢ All Residents (Public Notice)"}),(d=n==null?void 0:n.residents)==null?void 0:d.map(t=>e.jsxs(c,{value:t._id,children:[t.name," â€” Flat ",t.flatNumber]},t._id))]}),e.jsx(b,{type:"submit",variant:"contained",color:"primary",disabled:o,children:o?e.jsx(v,{size:24}):"Post Notice"})]})]})};export{C as default};
