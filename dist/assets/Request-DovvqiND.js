import{aL as f,aM as y,r as l,aN as R,j as e,P as k,aI as W}from"./index-TOg4iC9X.js";import{T as C,a as A,b as w,c as u,d as a,e as D}from"./TableRow-Csk7A2q-.js";import{M as o}from"./MenuItem-DFBgWJ5J.js";import{T as E}from"./TablePagination-5p5xmu9T.js";import"./listItemTextClasses-BwEbF0GS.js";import"./dividerClasses-9ENEhr9G.js";import"./Toolbar-DEMU4rmm.js";const L=[{id:"amenity",label:"Amenity name",minWidth:170},{id:"resident",label:"Resident",minWidth:200},{id:"status",label:"Status",minWidth:100},{id:"bookingDate",label:"Booking Date",minWidth:170},{id:"startTime",label:"Start Time",minWidth:170},{id:"endTime",label:"End Time",minWidth:170}],O=()=>{const{bid:M}=f(),{data:r,isLoading:g,error:x,refetch:p}=y(),[d,c]=l.useState(0),[s,j]=l.useState(10),[U,q]=l.useState(),[b]=R(),P=(t,i)=>{c(i)},T=t=>{j(+t.target.value),c(0)},v=async(t,i)=>{try{await b({bid:t,status:i}).unwrap(),p(),console.log("Status updated successfully")}catch(n){console.error("Error updating status",n)}};if(g)return e.jsx("div",{children:"Loading..."});if(x)return e.jsx("div",{children:"Error loading Request."});const h=(r==null?void 0:r.bookings)||[];return e.jsx(e.Fragment,{children:e.jsxs(k,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(C,{sx:{maxHeight:440},children:e.jsxs(A,{stickyHeader:!0,"aria-label":"Request Table",children:[e.jsx(w,{children:e.jsx(u,{children:L.map(t=>e.jsx(a,{align:t.align,style:{minWidth:t.minWidth},children:t.label},t.id))})}),e.jsx(D,{children:h.slice(d*s,d*s+s).map((t,i)=>{var n,m;return e.jsxs(u,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(a,{children:((n=t.amenity)==null?void 0:n.name)||"N/A"}),e.jsx(a,{children:((m=t.resident)==null?void 0:m.name)||"N/A"}),e.jsx(a,{children:e.jsxs(W,{value:t.status,onChange:S=>v(t._id,S.target.value),size:"small",children:[e.jsx(o,{value:"pending",children:"Pending"}),e.jsx(o,{value:"approved",children:"Approved"}),e.jsx(o,{value:"rejected",children:"Rejected"})]})}),e.jsx(a,{children:new Date(t.bookingDate).toLocaleDateString()}),e.jsx(a,{children:t.startTime}),e.jsx(a,{children:t.endTime})]},t._id)})})]})}),e.jsx(E,{rowsPerPageOptions:[10,25,100],component:"div",count:h.length,rowsPerPage:s,page:d,onPageChange:P,onRowsPerPageChange:T})]})})};export{O as default};
